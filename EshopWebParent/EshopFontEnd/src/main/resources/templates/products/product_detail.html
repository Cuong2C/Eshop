<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" >
<head th:replace="~{fragments :: page_head('Product ' + ${pageTitle},'none')}"/>

</head>
<body>
	<div class="container-fluid  bg-light">
		<div th:replace="~{navigation :: header_menu}" ></div>
		<div th:replace="~{navigation :: search_nav}" ></div>
	<div class="container bg-white">
		<div th:replace="~{breadcrumb :: content}" ></div>
		
		<div class="row">
			<div class="col-sm">
				<div >
					<img  id="bigImage" class="img-fluid m-2 " th:src="@{${product.mainImagePath}}" style="height: 450px ;" index="0" />
				</div>
				<div class="row justify-content-center">
					<div class=" m-2 p-2 border border-secondary shadow rounded">
						<img class="image-thumbnail" th:src="@{${product.mainImagePath}}" height="65" index="0"/>
					</div>
					<th:block th:each="extraImg, status : ${product.images}">
						<div class="m-2 p-2 border border-secondary shadow rounded" >
							<img class="image-thumbnail" th:src="@{${extraImg.imagePath}}" height="65" th:index="${status.count}"/>
						</div>
					</th:block>
				</div>
				
				
			</div>
			
			<div class="col-sm">
				<div>
					<h2>[[${product.name}]]</h2>
				</div>
				<div>
					<span>Brand: [[${product.brand.name}]]</span>
				</div>
				<div th:if="${product.discountPercent <= 0}">
					<span style="font-size:larger; color: #fe9765;"><b>$[[${product.price}]]</b></span>
				</div>
				<div th:if="${product.discountPercent > 0}">
					<del><span>$[[${product.price}]]</span></del>
					<span style="font-size:larger; color: #fe9765;"><b>$[[${product.discountPrice}]]</b></span> <span style="font-size: 90%; color: #fe9765;">([[${product.discountPercent}]] % OFF)</span>
				</div>
				<div class="my-2" th:utext="${product.shortDescription}"></div>
				
				<div>
					<span th:if="${product.inStock}" class="text-success"><b>In Stock</b></span>
					<span th:unless="${product.inStock}" class="text-success"><b>Out Of Stock</b></span>
					<input type="text" size="5" value="1"/>
				</div>
				<div class="my-2">
					<input type="button" value="Add To Cart" class="btn btn-outline-primary"/>
					<input type="button" value="Buy Now" class="btn btn-primary"/>
				</div>			
			</div>
					
		</div>
		<div class="row ">
			<div class="col-12 my-2">
				<div><hr/></div>
				<div>
					<h3>Product Description:</h3>
				</div>
				<div th:utext="${product.fullDescription}"></div>
			</div>
		</div>
		<div class="row ">
			<div class="col-12 my-2">
				<div><hr/></div>
				<div>
					<h3>Product Details</h3>
				</div>
				<th:block th:each="detail : ${product.details}">
					<div class="row">
						<label class="col-2 text-secondary">
							<b>[[${detail.name}]]</b>
						</label>
						<div class="col-4">
							<span>[[${detail.value}]]</span>
						</div>
					</div>
					
				</th:block>
			</div>
		</div>

		
		<div th:replace="~{products/images_carousel :: content}" ></div>
		</div>
		<div th:replace="~{navigation :: footer_menu}" ></div>
		
	</div>
	
<script type="text/javascript">
	$(document).ready(function(){
		bigImage = $("#bigImage");
		$(".image-thumbnail").mouseover(function(){
			currentImageSource = $(this).attr("src");
			currentImageIndex = $(this).attr("index");
			
			bigImage.attr("src", currentImageSource );
			bigImage.attr("index", currentImageIndex );
		});
		
		bigImage.on("click", function(){
			$("#carouselModal").modal("show");
			imageIndex = parseInt(bigImage.attr("index"));
			$("#carouselExampleIndicators").carousel(imageIndex);
		})
		
	});
	
</script>	
</body>
</html>